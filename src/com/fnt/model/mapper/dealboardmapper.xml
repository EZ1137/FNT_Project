<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="dealboardmapper">
<resultMap type="dealboarddto" id="dealBoardDtoResultMap">
	<result property="dboardno" column="D_BOARDNO"/>
	<result property="did" column="D_ID"/>
	<result property="dnickname" column="D_NICKNAME"/>
	<result property="dtitle" column="D_TITLE"/>
	<result property="dfilename" column="D_FILENAME"/>
	<result property="dcontent" column="D_CONTENT"/>
	<result property="dprice" column="D_PRICE"/>
	<result property="dregdate" column="D_REGDATE"/>
	<result property="dcategory" column="D_CATEGORY"/>
	<result property="dflag" column="D_FLAG"/>
</resultMap>
<!-- 판매목록 -->
	<select id="selectsalelist" resultMap="dealBoardDtoResultMap">
		SELECT D_BOARDNO, D_ID, D_NICKNAME, D_TITLE, D_FILENAME, D_CONTENT, D_PRICE, D_REGDATE, D_CATEGORY, D_FLAG
		FROM DEAL_BOARD
		WHERE D_FLAG = 'S'
	</select>
	
<!-- 구매목록 -->
	<select id="selectbuylist" resultMap="dealBoardDtoResultMap">
		SELECT D_BOARDNO, D_ID, D_NICKNAME, D_TITLE, D_FILENAME, D_CONTENT, D_PRICE, D_REGDATE, D_CATEGORY, D_FLAG
		FROM DEAL_BOARD
		WHERE D_FLAG = 'B'
	</select>

<!-- 구매글 작성 -->
	<insert id="insertbuyboard" parameterType="dealboarddto">
		INSERT INTO DEAL_BOARD 
		VALUES (DB_BOARDNO_SEQ.NEXTVAL, #{did}, #{dnickname}, #{dtitle}, #{dfilename}, #{dcontent}, #{dprice}, SYSDATE, #{dcategory}, 'B' )
	</insert>

<!-- 판매글 작성 -->
	<insert id="insertsaleboard" parameterType="dealboarddto">
		INSERT INTO DEAL_BOARD 
		VALUES (DB_BOARDNO_SEQ.NEXTVAL, #{did}, #{dnickname}, #{dtitle}, #{dfilename}, #{dcontent}, #{dprice}, SYSDATE, #{dcategory}, 'S' )
	</insert>

<!-- 글 자세히 보기 -->
	<select id="selectdetail" resultMap="dealBoardDtoResultMap">
		SELECT D_BOARDNO, D_ID, D_NICKNAME, D_TITLE, D_FILENAME, D_CONTENT, D_PRICE, D_REGDATE, D_CATEGORY, D_FLAG
		FROM DEAL_BOARD
		WHERE D_BOARDNO = #{dboardno}
	</select>
	
<!-- 글 삭제하기 -->
	<delete id="deletedealboard" parameterType="int">
		DELETE DEAL_BOARD
		WHERE D_BOARDNO = #{dboardno} 
	</delete>

<!-- 글 수정하기 -->
	<update id="updatedealboard" parameterType="dealboarddto">
		UPDATE DEAL_BOARD
		SET D_TITLE = #{dtitle},
			D_CONTENT = #{dcontent},
			D_PRICE = #{dprice},
			D_CATEGORY = #{dcategory}
		WHERE D_BOARDNO = #{dboardno}
	</update>
</mapper>
